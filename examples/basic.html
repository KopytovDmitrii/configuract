<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Framework - –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            min-height: 100vh;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 2px solid #007bff;
        }
        
        .header h1 {
            color: #007bff;
            margin: 0;
        }
        
        .card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .card h3 {
            margin-top: 0;
            color: #333;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: background-color 0.3s ease;
        }
        
        .btn-primary {
            background: #007bff;
            color: white;
        }
        
        .btn-primary:hover {
            background: #0056b3;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #1e7e34;
        }
        
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .btn-warning:hover {
            background: #e0a800;
        }
        
        .counter-display {
            font-size: 18px;
            font-weight: bold;
            color: #007bff;
            margin: 10px 0;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }
        
        .todo-item {
            padding: 10px;
            border: 1px solid #ddd;
            margin: 5px 0;
            border-radius: 4px;
            background: #f8f9fa;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .todo-item.completed {
            text-decoration: line-through;
            opacity: 0.6;
        }
        
        .stats {
            background: #e9ecef;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }
        
        .stats h4 {
            margin-top: 0;
            color: #495057;
        }
        
        .alert {
            padding: 12px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .alert-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .alert-info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div id="app"></div>
    
    <script src="../dist/js-framework.iife.js"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞
        const { JSFramework, Framework } = window.JSFramework;
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let appState = {
            counter: 0,
            todos: [],
            username: '',
            message: ''
        };
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        function incrementCounter() {
            appState.counter++;
            showAlert('–°—á—ë—Ç—á–∏–∫ —É–≤–µ–ª–∏—á–µ–Ω!', 'success');
            updateStats();
        }
        
        function decrementCounter() {
            appState.counter--;
            showAlert('–°—á—ë—Ç—á–∏–∫ —É–º–µ–Ω—å—à–µ–Ω!', 'success');
            updateStats();
        }
        
        function resetCounter() {
            appState.counter = 0;
            showAlert('–°—á—ë—Ç—á–∏–∫ —Å–±—Ä–æ—à–µ–Ω!', 'info');
            updateStats();
        }
        
        function addTodo() {
            const text = prompt('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏:');
            if (text && text.trim()) {
                appState.todos.push({
                    id: Date.now(),
                    text: text.trim(),
                    completed: false
                });
                renderTodoList();
                showAlert('–ó–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!', 'success');
            }
        }
        
        function toggleTodo(id) {
            const todo = appState.todos.find(t => t.id === id);
            if (todo) {
                todo.completed = !todo.completed;
                renderTodoList();
            }
        }
        
        function deleteTodo(id) {
            appState.todos = appState.todos.filter(t => t.id !== id);
            renderTodoList();
            showAlert('–ó–∞–¥–∞—á–∞ —É–¥–∞–ª–µ–Ω–∞!', 'info');
        }
        
        function handleFormSubmit(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            appState.username = formData.get('username') || '';
            appState.message = formData.get('message') || '';
            
            showAlert(`–§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ü—Ä–∏–≤–µ—Ç, ${appState.username}!`, 'success');
            event.target.reset();
        }
        
        function showAlert(message, type) {
            const alertConfig = {
                tag: 'div',
                props: {
                    class: `alert alert-${type}`,
                    style: {
                        position: 'fixed',
                        top: '20px',
                        right: '20px',
                        zIndex: 1000,
                        minWidth: '300px'
                    }
                },
                children: [message]
            };
            
            const renderer = new window.JSFramework.HTMLRenderer();
            const alertElement = renderer.render(alertConfig, document.body);
            
            setTimeout(() => {
                renderer.unmount(alertElement);
            }, 3000);
        }
        
        function updateStats() {
            const statsElement = Framework.findById('stats-content');
            if (statsElement) {
                const stats = Framework.getStats();
                statsElement.innerHTML = `
                    <strong>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞:</strong><br>
                    –≠–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω–æ: ${stats.elementsCreated}<br>
                    –°–æ–±—ã—Ç–∏—è –ø—Ä–∏–≤—è–∑–∞–Ω—ã: ${stats.eventsAttached}<br>
                    –í—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞: ${stats.renderTime.toFixed(2)}–º—Å<br>
                    <strong>–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:</strong><br>
                    –ó–Ω–∞—á–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞: ${appState.counter}<br>
                    –í—Å–µ–≥–æ –∑–∞–¥–∞—á: ${appState.todos.length}<br>
                    –í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á: ${appState.todos.filter(t => t.completed).length}
                `;
            }
        }
        
        function renderTodoList() {
            const todoContainer = Framework.findById('todo-list');
            if (todoContainer) {
                todoContainer.innerHTML = '';
                
                appState.todos.forEach(todo => {
                    const todoConfig = {
                        tag: 'div',
                        props: { 
                            class: `todo-item ${todo.completed ? 'completed' : ''}` 
                        },
                        children: [
                            {
                                tag: 'span',
                                children: [todo.text]
                            },
                            {
                                tag: 'div',
                                children: [
                                    {
                                        tag: 'button',
                                        props: { class: 'btn btn-success' },
                                        events: { click: () => toggleTodo(todo.id) },
                                        children: [todo.completed ? '‚Ü©Ô∏è –û—Ç–º–µ–Ω–∏—Ç—å' : '‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ']
                                    },
                                    {
                                        tag: 'button',
                                        props: { class: 'btn btn-warning' },
                                        events: { click: () => deleteTodo(todo.id) },
                                        children: ['üóëÔ∏è –£–¥–∞–ª–∏—Ç—å']
                                    }
                                ]
                            }
                        ]
                    };
                    
                    const renderer = new window.JSFramework.HTMLRenderer();
                    const todoElement = renderer.render(todoConfig, todoContainer);
                });
            }
        }
        
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const appConfig = {
            tag: 'div',
            props: {
                class: 'container'
            },
            children: [
                // –ó–∞–≥–æ–ª–æ–≤–æ–∫
                {
                    tag: 'div',
                    props: { class: 'header' },
                    children: [
                        {
                            tag: 'h1',
                            children: ['üöÄ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ JS Framework']
                        },
                        {
                            tag: 'p',
                            children: ['–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞']
                        }
                    ]
                },
                
                // –°—á—ë—Ç—á–∏–∫
                {
                    tag: 'div',
                    props: { class: 'card' },
                    children: [
                        {
                            tag: 'h3',
                            children: ['üìä –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å—á—ë—Ç—á–∏–∫']
                        },
                        {
                            tag: 'div',
                            props: { 
                                class: 'counter-display',
                                id: 'counter-display'
                            },
                            children: [`–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: ${appState.counter}`]
                        },
                        {
                            tag: 'div',
                            children: [
                                {
                                    tag: 'button',
                                    props: { class: 'btn btn-primary' },
                                    events: { click: incrementCounter },
                                    children: ['‚ûï –£–≤–µ–ª–∏—á–∏—Ç—å']
                                },
                                {
                                    tag: 'button',
                                    props: { class: 'btn btn-primary' },
                                    events: { click: decrementCounter },
                                    children: ['‚ûñ –£–º–µ–Ω—å—à–∏—Ç—å']
                                },
                                {
                                    tag: 'button',
                                    props: { class: 'btn btn-warning' },
                                    events: { click: resetCounter },
                                    children: ['üîÑ –°–±—Ä–æ—Å–∏—Ç—å']
                                }
                            ]
                        }
                    ]
                },
                
                // –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
                {
                    tag: 'div',
                    props: { class: 'card' },
                    children: [
                        {
                            tag: 'h3',
                            children: ['üìù –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á']
                        },
                        {
                            tag: 'button',
                            props: { class: 'btn btn-success' },
                            events: { click: addTodo },
                            children: ['‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É']
                        },
                        {
                            tag: 'div',
                            props: { id: 'todo-list' },
                            children: []
                        }
                    ]
                },
                
                // –§–æ—Ä–º–∞
                {
                    tag: 'div',
                    props: { class: 'card' },
                    children: [
                        {
                            tag: 'h3',
                            children: ['üìã –ü—Ä–∏–º–µ—Ä —Ñ–æ—Ä–º—ã']
                        },
                        {
                            tag: 'form',
                            events: { submit: handleFormSubmit },
                            children: [
                                {
                                    tag: 'div',
                                    props: { class: 'form-group' },
                                    children: [
                                        {
                                            tag: 'label',
                                            props: { for: 'username' },
                                            children: ['–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:']
                                        },
                                        {
                                            tag: 'input',
                                            props: {
                                                type: 'text',
                                                id: 'username',
                                                name: 'username',
                                                placeholder: '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è',
                                                required: true
                                            }
                                        }
                                    ]
                                },
                                {
                                    tag: 'div',
                                    props: { class: 'form-group' },
                                    children: [
                                        {
                                            tag: 'label',
                                            props: { for: 'email' },
                                            children: ['Email:']
                                        },
                                        {
                                            tag: 'input',
                                            props: {
                                                type: 'email',
                                                id: 'email',
                                                name: 'email',
                                                placeholder: 'your@email.com'
                                            }
                                        }
                                    ]
                                },
                                {
                                    tag: 'div',
                                    props: { class: 'form-group' },
                                    children: [
                                        {
                                            tag: 'label',
                                            props: { for: 'message' },
                                            children: ['–°–æ–æ–±—â–µ–Ω–∏–µ:']
                                        },
                                        {
                                            tag: 'textarea',
                                            props: {
                                                id: 'message',
                                                name: 'message',
                                                rows: 4,
                                                placeholder: '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...'
                                            }
                                        }
                                    ]
                                },
                                {
                                    tag: 'button',
                                    props: { 
                                        type: 'submit',
                                        class: 'btn btn-primary'
                                    },
                                    children: ['üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É']
                                }
                            ]
                        }
                    ]
                },
                
                // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                {
                    tag: 'div',
                    props: { class: 'stats' },
                    children: [
                        {
                            tag: 'h4',
                            children: ['üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞']
                        },
                        {
                            tag: 'div',
                            props: { id: 'stats-content' },
                            children: ['–ó–∞–≥—Ä—É–∑–∫–∞...']
                        }
                    ]
                }
            ]
        };
        
        // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        try {
            console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è JS Framework...');
            const app = Framework.render(appConfig, '#app');
            console.log('‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–æ!');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
            setTimeout(updateStats, 100);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –∑–∞–¥–∞—á
            appState.todos = [
                { id: 1, text: '–ò–∑—É—á–∏—Ç—å JS Framework', completed: false },
                { id: 2, text: '–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ', completed: true },
                { id: 3, text: '–ù–∞–ø–∏—Å–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é', completed: false }
            ];
            renderTodoList();
            
        } catch (error) {
            console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:', error);
            document.getElementById('app').innerHTML = `
                <div style="color: red; padding: 20px; border: 1px solid red; margin: 20px;">
                    <h2>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h2>
                    <p>${error.message}</p>
                    <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.</p>
                </div>
            `;
        }
    </script>
</body>
</html>